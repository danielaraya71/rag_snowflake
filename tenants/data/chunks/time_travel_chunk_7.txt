1
NUMBER
,
col2
DATE
)
DATA_RETENTION_TIME_IN_DAYS
=
90
;
ALTER
TABLE
mytable
SET
DATA_RETENTION_TIME_IN_DAYS
=
30
;
Copy
Attention
Changing the retention period for your account or individual objects changes the value for all lower-level objects that do not have a
retention period explicitly set. For example:
If you change the retention period at the account level, all databases, schemas, and tables that do not have an explicit retention period
automatically inherit the new retention period.
If you change the retention period at the schema level, all tables in the schema that do not have an explicit retention period inherit the
new retention period.
Keep this in mind when changing the retention period for your account or any objects in your account because the change might have
Time Travel consequences that you did not anticipate or intend. In particular, we do
not
recommend changing the retention period to 0
at the account level.
Dropped containers and object retention inheritance
¶
Currently, when a database is dropped, the data retention period for child schemas or tables, if explicitly set to be different from the
retention of the database, is not honored. The child schemas or tables are retained for the same period of time as the database.
Similarly, when a schema is dropped, the data retention period for child tables, if explicitly set to be different from the retention of
the schema, is not honored. The child tables are retained for the same period of time as the schema.
To honor the data retention period for these child objects (schemas or tables), drop them explicitly
before
you drop the database
or schema.
Querying historical data
¶
When any DML operations are performed on a table, Snowflake retains previous versions of the table data for a defined period of time. This
enables querying earlier versions of the data using the
AT | BEFORE
clause.
This clause supports querying data either exactly at or immediately preceding a specified point in the table’s history within the
retention period. The specified point can be time-based (for example, a timestamp or time offset from the present) or it can be the ID for a
completed statement (for example, SELECT or INSERT).
For example:
The following query selects historical data from a table as of the date and time represented by the specified
timestamp
:
SELECT
*
FROM
my_table
AT
(
TIM
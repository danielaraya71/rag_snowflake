$DESC_ICEBERG_ACCESS_IDENTITY, replace
your_tenant_id
with the ID for your
tenant that the storage location belongs to.
In the source account, use the
CREATE REPLICATION GROUP
command to create a replication group.
Specify
EXTERNAL
VOLUMES
in the
OBJECT_TYPES
list. In the
ALLOWED_DATABASES
list, include the database with the Iceberg table(s) you want to replicate. In the
ALLOWED_EXTERNAL_VOLUMES
list, include the external volumes that provide access to the Iceberg table(s) you want to replicate.
CREATE
REPLICATION
GROUP
my_iceberg_rg
OBJECT_TYPES
=
DATABASES
,
EXTERNAL
VOLUMES
ALLOWED_DATABASES
=
my_iceberg_database
ALLOWED_EXTERNAL_VOLUMES
=
my_external_volume
ALLOWED_ACCOUNTS
=
myorg
.
my_account_1
;
Copy
Note
If you receive a SQL parser error, your list of allowed external volumes might be too long. If you receive this error, shorten this
list in your CREATE REPLICATION GROUP statement, and then use the
ALTER REPLICATION GROUP
command to add
additional allowed external volumes to the replication group.
To update an existing group, use the
ALTER REPLICATION GROUP
command to add
EXTERNAL
VOLUMES
to the
OBJECT_TYPES
list.
Include any other existing objects in the
OBJECT_TYPES
list to avoid dropping those objects in the target account.
For example, add
EXTERNAL
VOLUMES
to a replication group that already includes
DATABASES
:
ALTER
REPLICATION
GROUP
my_iceberg_rg
SET
OBJECT_TYPES
=
DATABASES
,
EXTERNAL
VOLUMES
ALLOWED_EXTERNAL_VOLUMES
=
my_external_volume
;
Copy
In the target account, create a replication group as a replica of the group in the source account (
my_source_account
):
CREATE
REPLICATION
GROUP
my_iceberg_rg
AS
REPLICA
OF
myorg
.
my_source_account
.
my_iceberg_rg
;
Copy
Skip this step if you already have a secondary group that replicates the group in the source account.
In the target account, run a refresh command.
ALTER
REPLICATION
GROUP
my_iceberg_rg
REFRESH
;
Copy
As long as you replicate the database that contains your Snowflake